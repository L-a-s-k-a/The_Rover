ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.section	.text.main,"ax",%progbits
  21              		.align	1
  22              		.global	main
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	main:
  28              	.LFB130:
   1:Core/Src/main.c **** #include "interrupt.h"
   2:Core/Src/main.c **** 
   3:Core/Src/main.c **** uint16_t ADC_Read_Inject(uint8_t channel);
   4:Core/Src/main.c **** uint16_t ADC_Read_Polling(uint8_t channel);
   5:Core/Src/main.c **** 
   6:Core/Src/main.c **** uint16_t adcBuf[3], adcInter;
   7:Core/Src/main.c **** uint16_t GlobalTickCount, MotorTickCount, potentiometr, adcTS;
   8:Core/Src/main.c **** uint8_t BtnNum;
   9:Core/Src/main.c **** float FLAG_Revolution, calculatePulseARR, Temperature, Vsense;
  10:Core/Src/main.c **** 
  11:Core/Src/main.c **** int main(void)
  12:Core/Src/main.c **** {
  29              		.loc 1 12 1 view -0
  30              		.cfi_startproc
  31              		@ Volatile: function does not return.
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  13:Core/Src/main.c ****     RCC_Init();
  39              		.loc 1 13 5 view .LVU1
  40 0002 FFF7FEFF 		bl	RCC_Init
  41              	.LVL0:
  14:Core/Src/main.c ****     ITR_Init();
  42              		.loc 1 14 5 view .LVU2
  43 0006 FFF7FEFF 		bl	ITR_Init
  44              	.LVL1:
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 2


  15:Core/Src/main.c ****     GPIO_Init();
  45              		.loc 1 15 5 view .LVU3
  46 000a FFF7FEFF 		bl	GPIO_Init
  47              	.LVL2:
  16:Core/Src/main.c ****     SysTick_Init();
  48              		.loc 1 16 5 view .LVU4
  49 000e FFF7FEFF 		bl	SysTick_Init
  50              	.LVL3:
  17:Core/Src/main.c ****     TIM_PWM_Init();
  51              		.loc 1 17 5 view .LVU5
  52 0012 FFF7FEFF 		bl	TIM_PWM_Init
  53              	.LVL4:
  18:Core/Src/main.c ****     ADC_Init_Polling();
  54              		.loc 1 18 5 view .LVU6
  55 0016 FFF7FEFF 		bl	ADC_Init_Polling
  56              	.LVL5:
  57              	.L2:
  19:Core/Src/main.c ****     // TIM_ENCODER_Init();
  20:Core/Src/main.c ****     // Enc_Trig_Init();
  21:Core/Src/main.c **** 
  22:Core/Src/main.c ****     // SET_BIT(ADC1->CR2, ADC_CR2_JSWSTART);
  23:Core/Src/main.c ****     // SET_BIT(ADC1->CR2, ADC_CR2_SWSTART);
  24:Core/Src/main.c **** 
  25:Core/Src/main.c ****     while (1)
  58              		.loc 1 25 5 view .LVU7
  26:Core/Src/main.c ****     {
  27:Core/Src/main.c ****         // adcTS = ADC_Read_Polling(0);
  28:Core/Src/main.c ****         // adcBuf[0] = ADC_Read_Polling(0);
  29:Core/Src/main.c ****         adcBuf[0] = READ_REG(ADC1->DR);
  59              		.loc 1 29 9 view .LVU8
  60              		.loc 1 29 21 is_stmt 0 view .LVU9
  61 001a 234A     		ldr	r2, .L4+24
  62 001c D46C     		ldr	r4, [r2, #76]
  63              		.loc 1 29 19 view .LVU10
  64 001e 234B     		ldr	r3, .L4+28
  65 0020 1C80     		strh	r4, [r3]	@ movhi
  30:Core/Src/main.c ****         // for(int i = 0; i < 10000000; i++);
  31:Core/Src/main.c ****         // adcTS = ADC_Read_Polling(1);
  32:Core/Src/main.c ****         // adcBuf[1] = ADC_Read_Polling(1);
  33:Core/Src/main.c ****         // for(int i = 0; i < 10000000; i++);
  34:Core/Src/main.c ****         // adcTS = ADC_Read_Polling(16);
  35:Core/Src/main.c ****         // adcBuf[2] = ADC_Read_Polling(16);
  36:Core/Src/main.c ****         // for(int i = 0; i < 10000000; i++);
  37:Core/Src/main.c ****         // adcBuf[3] = ADC_Read_Inject(2);
  38:Core/Src/main.c ****         adcBuf[3] = READ_REG(ADC1->JDR1);
  66              		.loc 1 38 9 is_stmt 1 view .LVU11
  67              		.loc 1 38 21 is_stmt 0 view .LVU12
  68 0022 D26B     		ldr	r2, [r2, #60]
  69              		.loc 1 38 19 view .LVU13
  70 0024 DA80     		strh	r2, [r3, #6]	@ movhi
  39:Core/Src/main.c ****         // for(int i = 0; i < 10000000; i++);
  40:Core/Src/main.c ****         Vsense = (3.1 * adcBuf[2]) / 4095U;
  71              		.loc 1 40 9 is_stmt 1 view .LVU14
  72              		.loc 1 40 23 is_stmt 0 view .LVU15
  73 0026 9888     		ldrh	r0, [r3, #4]
  74 0028 FFF7FEFF 		bl	__aeabi_i2d
  75              	.LVL6:
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 3


  76 002c 18A3     		adr	r3, .L4
  77 002e D3E90023 		ldrd	r2, [r3]
  78 0032 FFF7FEFF 		bl	__aeabi_dmul
  79              	.LVL7:
  80              		.loc 1 40 36 view .LVU16
  81 0036 18A3     		adr	r3, .L4+8
  82 0038 D3E90023 		ldrd	r2, [r3]
  83 003c FFF7FEFF 		bl	__aeabi_ddiv
  84              	.LVL8:
  85 0040 FFF7FEFF 		bl	__aeabi_d2f
  86              	.LVL9:
  87              		.loc 1 40 16 view .LVU17
  88 0044 1A4B     		ldr	r3, .L4+32
  89 0046 1860     		str	r0, [r3]	@ float
  41:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcBuf[0]) / 4095; 
  90              		.loc 1 41 9 is_stmt 1 view .LVU18
  91              		.loc 1 41 36 is_stmt 0 view .LVU19
  92 0048 A4B2     		uxth	r4, r4
  93              		.loc 1 41 28 view .LVU20
  94 004a 42F2D003 		movw	r3, #8400
  95 004e 03FB04F4 		mul	r4, r3, r4
  96              		.loc 1 41 41 view .LVU21
  97 0052 184B     		ldr	r3, .L4+36
  98 0054 83FB0423 		smull	r2, r3, r3, r4
  99 0058 2344     		add	r3, r3, r4
 100 005a DB12     		asrs	r3, r3, #11
 101              		.loc 1 41 20 view .LVU22
 102 005c 164A     		ldr	r2, .L4+40
 103 005e 9363     		str	r3, [r2, #56]
  42:Core/Src/main.c ****         Temperature = ((0.76 - Vsense) / 2.5) + 25;
 104              		.loc 1 42 9 is_stmt 1 discriminator 1 view .LVU23
 105              		.loc 1 42 30 is_stmt 0 discriminator 1 view .LVU24
 106 0060 FFF7FEFF 		bl	__aeabi_f2d
 107              	.LVL10:
 108 0064 0246     		mov	r2, r0
 109 0066 0B46     		mov	r3, r1
 110 0068 0DA1     		adr	r1, .L4+16
 111 006a D1E90001 		ldrd	r0, [r1]
 112 006e FFF7FEFF 		bl	__aeabi_dsub
 113              	.LVL11:
 114              		.loc 1 42 40 discriminator 1 view .LVU25
 115 0072 0022     		movs	r2, #0
 116 0074 114B     		ldr	r3, .L4+44
 117 0076 FFF7FEFF 		bl	__aeabi_ddiv
 118              	.LVL12:
 119              		.loc 1 42 47 discriminator 1 view .LVU26
 120 007a 0022     		movs	r2, #0
 121 007c 104B     		ldr	r3, .L4+48
 122 007e FFF7FEFF 		bl	__aeabi_dadd
 123              	.LVL13:
 124 0082 FFF7FEFF 		bl	__aeabi_d2f
 125              	.LVL14:
 126              		.loc 1 42 21 discriminator 1 view .LVU27
 127 0086 0F4B     		ldr	r3, .L4+52
 128 0088 1860     		str	r0, [r3]	@ float
  25:Core/Src/main.c ****     {
 129              		.loc 1 25 11 is_stmt 1 view .LVU28
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 4


 130 008a C6E7     		b	.L2
 131              	.L5:
 132 008c AFF30080 		.align	3
 133              	.L4:
 134 0090 CDCCCCCC 		.word	-858993459
 135 0094 CCCC0840 		.word	1074318540
 136 0098 00000000 		.word	0
 137 009c 00FEAF40 		.word	1085275648
 138 00a0 52B81E85 		.word	-2061584302
 139 00a4 EB51E83F 		.word	1072189931
 140 00a8 00200140 		.word	1073815552
 141 00ac 00000000 		.word	adcBuf
 142 00b0 00000000 		.word	Vsense
 143 00b4 81000880 		.word	-2146959231
 144 00b8 00040040 		.word	1073742848
 145 00bc 00000440 		.word	1074003968
 146 00c0 00003940 		.word	1077477376
 147 00c4 00000000 		.word	Temperature
 148              		.cfi_endproc
 149              	.LFE130:
 151              		.section	.text.ADC_Read_Inject,"ax",%progbits
 152              		.align	1
 153              		.global	ADC_Read_Inject
 154              		.syntax unified
 155              		.thumb
 156              		.thumb_func
 158              	ADC_Read_Inject:
 159              	.LVL15:
 160              	.LFB131:
  43:Core/Src/main.c ****     }
  44:Core/Src/main.c **** }
  45:Core/Src/main.c **** 
  46:Core/Src/main.c **** uint16_t ADC_Read_Inject(uint8_t channel){
 161              		.loc 1 46 42 view -0
 162              		.cfi_startproc
 163              		@ args = 0, pretend = 0, frame = 0
 164              		@ frame_needed = 0, uses_anonymous_args = 0
 165              		@ link register save eliminated.
  47:Core/Src/main.c ****     MODIFY_REG(ADC1->JSQR, ADC_JSQR_JSQ4, (channel << ADC_JSQR_JSQ4_Pos));
 166              		.loc 1 47 5 view .LVU30
 167 0000 094A     		ldr	r2, .L8
 168 0002 936B     		ldr	r3, [r2, #56]
 169 0004 23F47823 		bic	r3, r3, #1015808
 170 0008 43EAC033 		orr	r3, r3, r0, lsl #15
 171 000c 9363     		str	r3, [r2, #56]
  48:Core/Src/main.c **** 
  49:Core/Src/main.c ****     SET_BIT(ADC1->CR2, ADC_CR2_JSWSTART); 
 172              		.loc 1 49 5 view .LVU31
 173 000e 9368     		ldr	r3, [r2, #8]
 174 0010 43F48003 		orr	r3, r3, #4194304
 175 0014 9360     		str	r3, [r2, #8]
  50:Core/Src/main.c **** 
  51:Core/Src/main.c ****     while(READ_BIT(ADC1->SR, ADC_SR_JEOC) == 0);
 176              		.loc 1 51 5 view .LVU32
 177              	.L7:
 178              		.loc 1 51 43 discriminator 1 view .LVU33
 179              		.loc 1 51 11 is_stmt 0 discriminator 1 view .LVU34
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 5


 180 0016 044B     		ldr	r3, .L8
 181 0018 1B68     		ldr	r3, [r3]
 182              		.loc 1 51 43 discriminator 1 view .LVU35
 183 001a 13F0040F 		tst	r3, #4
 184 001e FAD0     		beq	.L7
  52:Core/Src/main.c **** 
  53:Core/Src/main.c ****     return READ_REG(ADC1->JDR1);
 185              		.loc 1 53 5 is_stmt 1 view .LVU36
 186              		.loc 1 53 12 is_stmt 0 view .LVU37
 187 0020 014B     		ldr	r3, .L8
 188 0022 D86B     		ldr	r0, [r3, #60]
 189              	.LVL16:
  54:Core/Src/main.c **** }
 190              		.loc 1 54 1 view .LVU38
 191 0024 80B2     		uxth	r0, r0
 192 0026 7047     		bx	lr
 193              	.L9:
 194              		.align	2
 195              	.L8:
 196 0028 00200140 		.word	1073815552
 197              		.cfi_endproc
 198              	.LFE131:
 200              		.section	.text.ADC_Read_Polling,"ax",%progbits
 201              		.align	1
 202              		.global	ADC_Read_Polling
 203              		.syntax unified
 204              		.thumb
 205              		.thumb_func
 207              	ADC_Read_Polling:
 208              	.LVL17:
 209              	.LFB132:
  55:Core/Src/main.c **** 
  56:Core/Src/main.c **** uint16_t ADC_Read_Polling(uint8_t channel){
 210              		.loc 1 56 43 is_stmt 1 view -0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
  57:Core/Src/main.c ****     MODIFY_REG(ADC1->SQR3, ADC_SQR3_SQ1, (channel << ADC_SQR3_SQ1_Pos));
 215              		.loc 1 57 5 view .LVU40
 216 0000 094A     		ldr	r2, .L12
 217 0002 536B     		ldr	r3, [r2, #52]
 218 0004 23F01F03 		bic	r3, r3, #31
 219 0008 0343     		orrs	r3, r3, r0
 220 000a 5363     		str	r3, [r2, #52]
  58:Core/Src/main.c ****     
  59:Core/Src/main.c ****     SET_BIT(ADC1->CR2, ADC_CR2_SWSTART); 
 221              		.loc 1 59 5 view .LVU41
 222 000c 9368     		ldr	r3, [r2, #8]
 223 000e 43F08043 		orr	r3, r3, #1073741824
 224 0012 9360     		str	r3, [r2, #8]
  60:Core/Src/main.c **** 
  61:Core/Src/main.c ****     while(READ_BIT(ADC1->SR, ADC_SR_EOC) == 0);
 225              		.loc 1 61 5 view .LVU42
 226              	.L11:
 227              		.loc 1 61 42 discriminator 1 view .LVU43
 228              		.loc 1 61 11 is_stmt 0 discriminator 1 view .LVU44
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 6


 229 0014 044B     		ldr	r3, .L12
 230 0016 1B68     		ldr	r3, [r3]
 231              		.loc 1 61 42 discriminator 1 view .LVU45
 232 0018 13F0020F 		tst	r3, #2
 233 001c FAD0     		beq	.L11
  62:Core/Src/main.c **** 
  63:Core/Src/main.c ****     return READ_REG(ADC1->DR);
 234              		.loc 1 63 5 is_stmt 1 view .LVU46
 235              		.loc 1 63 12 is_stmt 0 view .LVU47
 236 001e 024B     		ldr	r3, .L12
 237 0020 D86C     		ldr	r0, [r3, #76]
 238              	.LVL18:
  64:Core/Src/main.c **** }...
 239              		.loc 1 64 1 view .LVU48
 240 0022 80B2     		uxth	r0, r0
 241 0024 7047     		bx	lr
 242              	.L13:
 243 0026 00BF     		.align	2
 244              	.L12:
 245 0028 00200140 		.word	1073815552
 246              		.cfi_endproc
 247              	.LFE132:
 249              		.global	Vsense
 250              		.section	.bss.Vsense,"aw",%nobits
 251              		.align	2
 254              	Vsense:
 255 0000 00000000 		.space	4
 256              		.global	Temperature
 257              		.section	.bss.Temperature,"aw",%nobits
 258              		.align	2
 261              	Temperature:
 262 0000 00000000 		.space	4
 263              		.global	calculatePulseARR
 264              		.section	.bss.calculatePulseARR,"aw",%nobits
 265              		.align	2
 268              	calculatePulseARR:
 269 0000 00000000 		.space	4
 270              		.global	FLAG_Revolution
 271              		.section	.bss.FLAG_Revolution,"aw",%nobits
 272              		.align	2
 275              	FLAG_Revolution:
 276 0000 00000000 		.space	4
 277              		.global	BtnNum
 278              		.section	.bss.BtnNum,"aw",%nobits
 281              	BtnNum:
 282 0000 00       		.space	1
 283              		.global	adcTS
 284              		.section	.bss.adcTS,"aw",%nobits
 285              		.align	1
 288              	adcTS:
 289 0000 0000     		.space	2
 290              		.global	potentiometr
 291              		.section	.bss.potentiometr,"aw",%nobits
 292              		.align	1
 295              	potentiometr:
 296 0000 0000     		.space	2
 297              		.global	MotorTickCount
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 7


 298              		.section	.bss.MotorTickCount,"aw",%nobits
 299              		.align	1
 302              	MotorTickCount:
 303 0000 0000     		.space	2
 304              		.global	GlobalTickCount
 305              		.section	.bss.GlobalTickCount,"aw",%nobits
 306              		.align	1
 309              	GlobalTickCount:
 310 0000 0000     		.space	2
 311              		.global	adcInter
 312              		.section	.bss.adcInter,"aw",%nobits
 313              		.align	1
 316              	adcInter:
 317 0000 0000     		.space	2
 318              		.global	adcBuf
 319              		.section	.bss.adcBuf,"aw",%nobits
 320              		.align	2
 323              	adcBuf:
 324 0000 00000000 		.space	6
 324      0000
 325              		.text
 326              	.Letext0:
 327              		.file 2 "C:/Programm/Embed tools/xpack-arm-none-eabi-gcc-14.2.1-1.1/arm-none-eabi/include/machine/
 328              		.file 3 "C:/Programm/Embed tools/xpack-arm-none-eabi-gcc-14.2.1-1.1/arm-none-eabi/include/sys/_std
 329              		.file 4 "CMSIS/Devices/STM32F4xx/Inc/STM32F407xx/stm32f407xx.h"
 330              		.file 5 "Core/Inc/interrupt.h"
 331              		.file 6 "Core/Inc/init.h"
ARM GAS  C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:21     .text.main:00000000 $t
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:27     .text.main:00000000 main
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:134    .text.main:00000090 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:323    .bss.adcBuf:00000000 adcBuf
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:254    .bss.Vsense:00000000 Vsense
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:261    .bss.Temperature:00000000 Temperature
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:152    .text.ADC_Read_Inject:00000000 $t
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:158    .text.ADC_Read_Inject:00000000 ADC_Read_Inject
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:196    .text.ADC_Read_Inject:00000028 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:201    .text.ADC_Read_Polling:00000000 $t
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:207    .text.ADC_Read_Polling:00000000 ADC_Read_Polling
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:245    .text.ADC_Read_Polling:00000028 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:251    .bss.Vsense:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:258    .bss.Temperature:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:268    .bss.calculatePulseARR:00000000 calculatePulseARR
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:265    .bss.calculatePulseARR:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:275    .bss.FLAG_Revolution:00000000 FLAG_Revolution
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:272    .bss.FLAG_Revolution:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:281    .bss.BtnNum:00000000 BtnNum
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:282    .bss.BtnNum:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:288    .bss.adcTS:00000000 adcTS
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:285    .bss.adcTS:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:295    .bss.potentiometr:00000000 potentiometr
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:292    .bss.potentiometr:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:302    .bss.MotorTickCount:00000000 MotorTickCount
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:299    .bss.MotorTickCount:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:309    .bss.GlobalTickCount:00000000 GlobalTickCount
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:306    .bss.GlobalTickCount:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:316    .bss.adcInter:00000000 adcInter
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:313    .bss.adcInter:00000000 $d
C:\Users\Laska\AppData\Local\Temp\ccjiDWnf.s:320    .bss.adcBuf:00000000 $d

UNDEFINED SYMBOLS
RCC_Init
ITR_Init
GPIO_Init
SysTick_Init
TIM_PWM_Init
ADC_Init_Polling
__aeabi_i2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_d2f
__aeabi_f2d
__aeabi_dsub
__aeabi_dadd
