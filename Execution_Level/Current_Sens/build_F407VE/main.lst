ARM GAS  C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.section	.text.ADC_Read_Polling,"ax",%progbits
  21              		.align	1
  22              		.global	ADC_Read_Polling
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	ADC_Read_Polling:
  28              	.LVL0:
  29              	.LFB131:
   1:Core/Src/main.c **** #include "interrupt.h"
   2:Core/Src/main.c **** 
   3:Core/Src/main.c **** uint16_t ADC_Read_Polling(uint8_t channel);
   4:Core/Src/main.c **** 
   5:Core/Src/main.c **** uint16_t GlobalTickCount, MotorTickCount, adcValue;
   6:Core/Src/main.c **** uint8_t BtnNum;
   7:Core/Src/main.c **** float FLAG_Revolution, calculatePulseARR;
   8:Core/Src/main.c **** 
   9:Core/Src/main.c **** int main(void)
  10:Core/Src/main.c **** {
  11:Core/Src/main.c ****     RCC_Init();
  12:Core/Src/main.c ****     ITR_Init();
  13:Core/Src/main.c ****     GPIO_Init();
  14:Core/Src/main.c ****     SysTick_Init();
  15:Core/Src/main.c ****     TIM_PWM_Init();
  16:Core/Src/main.c ****     ADC_Init_Polling();
  17:Core/Src/main.c ****     // TIM_ENCODER_Init();
  18:Core/Src/main.c ****     // Enc_Trig_Init();
  19:Core/Src/main.c **** 
  20:Core/Src/main.c ****     while (1)
  21:Core/Src/main.c ****     {
  22:Core/Src/main.c ****         adcValue = ADC_Read_Polling(0);
  23:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcValue) / 4095; 
  24:Core/Src/main.c **** 
  25:Core/Src/main.c ****     }
  26:Core/Src/main.c **** }
  27:Core/Src/main.c **** 
  28:Core/Src/main.c **** uint16_t ADC_Read_Polling(uint8_t channel){
  30              		.loc 1 28 43 view -0
ARM GAS  C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s 			page 2


  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  29:Core/Src/main.c ****     MODIFY_REG(ADC1->SQR3, ADC_SQR3_SQ1, (channel << ADC_SQR3_SQ1_Pos));
  35              		.loc 1 29 5 view .LVU1
  36 0000 094A     		ldr	r2, .L3
  37 0002 536B     		ldr	r3, [r2, #52]
  38 0004 23F01F03 		bic	r3, r3, #31
  39 0008 0343     		orrs	r3, r3, r0
  40 000a 5363     		str	r3, [r2, #52]
  30:Core/Src/main.c ****  
  31:Core/Src/main.c ****     SET_BIT(ADC1->CR2, ADC_CR2_SWSTART); 
  41              		.loc 1 31 5 view .LVU2
  42 000c 9368     		ldr	r3, [r2, #8]
  43 000e 43F08043 		orr	r3, r3, #1073741824
  44 0012 9360     		str	r3, [r2, #8]
  32:Core/Src/main.c **** 
  33:Core/Src/main.c ****     while(READ_BIT(ADC1->SR, ADC_SR_EOC) == 0);
  45              		.loc 1 33 5 view .LVU3
  46              	.L2:
  47              		.loc 1 33 42 discriminator 1 view .LVU4
  48              		.loc 1 33 11 is_stmt 0 discriminator 1 view .LVU5
  49 0014 044B     		ldr	r3, .L3
  50 0016 1B68     		ldr	r3, [r3]
  51              		.loc 1 33 42 discriminator 1 view .LVU6
  52 0018 13F0020F 		tst	r3, #2
  53 001c FAD0     		beq	.L2
  34:Core/Src/main.c **** 
  35:Core/Src/main.c ****     return READ_REG(ADC1->DR);
  54              		.loc 1 35 5 is_stmt 1 view .LVU7
  55              		.loc 1 35 12 is_stmt 0 view .LVU8
  56 001e 024B     		ldr	r3, .L3
  57 0020 D86C     		ldr	r0, [r3, #76]
  58              	.LVL1:
  36:Core/Src/main.c **** }...
  59              		.loc 1 36 1 view .LVU9
  60 0022 80B2     		uxth	r0, r0
  61 0024 7047     		bx	lr
  62              	.L4:
  63 0026 00BF     		.align	2
  64              	.L3:
  65 0028 00200140 		.word	1073815552
  66              		.cfi_endproc
  67              	.LFE131:
  69              		.section	.text.main,"ax",%progbits
  70              		.align	1
  71              		.global	main
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  76              	main:
  77              	.LFB130:
  10:Core/Src/main.c **** {
  78              		.loc 1 10 1 is_stmt 1 view -0
  79              		.cfi_startproc
  80              		@ Volatile: function does not return.
ARM GAS  C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s 			page 3


  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83 0000 08B5     		push	{r3, lr}
  84              	.LCFI0:
  85              		.cfi_def_cfa_offset 8
  86              		.cfi_offset 3, -8
  87              		.cfi_offset 14, -4
  11:Core/Src/main.c ****     RCC_Init();
  88              		.loc 1 11 5 view .LVU11
  89 0002 FFF7FEFF 		bl	RCC_Init
  90              	.LVL2:
  12:Core/Src/main.c ****     ITR_Init();
  91              		.loc 1 12 5 view .LVU12
  92 0006 FFF7FEFF 		bl	ITR_Init
  93              	.LVL3:
  13:Core/Src/main.c ****     GPIO_Init();
  94              		.loc 1 13 5 view .LVU13
  95 000a FFF7FEFF 		bl	GPIO_Init
  96              	.LVL4:
  14:Core/Src/main.c ****     SysTick_Init();
  97              		.loc 1 14 5 view .LVU14
  98 000e FFF7FEFF 		bl	SysTick_Init
  99              	.LVL5:
  15:Core/Src/main.c ****     TIM_PWM_Init();
 100              		.loc 1 15 5 view .LVU15
 101 0012 FFF7FEFF 		bl	TIM_PWM_Init
 102              	.LVL6:
  16:Core/Src/main.c ****     ADC_Init_Polling();
 103              		.loc 1 16 5 view .LVU16
 104 0016 FFF7FEFF 		bl	ADC_Init_Polling
 105              	.LVL7:
 106              	.L6:
  20:Core/Src/main.c ****     while (1)
 107              		.loc 1 20 5 view .LVU17
  22:Core/Src/main.c ****         adcValue = ADC_Read_Polling(0);
 108              		.loc 1 22 9 view .LVU18
  22:Core/Src/main.c ****         adcValue = ADC_Read_Polling(0);
 109              		.loc 1 22 20 is_stmt 0 view .LVU19
 110 001a 0020     		movs	r0, #0
 111 001c FFF7FEFF 		bl	ADC_Read_Polling
 112              	.LVL8:
  22:Core/Src/main.c ****         adcValue = ADC_Read_Polling(0);
 113              		.loc 1 22 18 discriminator 1 view .LVU20
 114 0020 064B     		ldr	r3, .L8
 115 0022 1880     		strh	r0, [r3]	@ movhi
  23:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcValue) / 4095; 
 116              		.loc 1 23 9 is_stmt 1 discriminator 1 view .LVU21
  23:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcValue) / 4095; 
 117              		.loc 1 23 28 is_stmt 0 discriminator 1 view .LVU22
 118 0024 42F2D003 		movw	r3, #8400
 119 0028 03FB00F0 		mul	r0, r3, r0
  23:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcValue) / 4095; 
 120              		.loc 1 23 40 discriminator 1 view .LVU23
 121 002c 044B     		ldr	r3, .L8+4
 122 002e 83FB0023 		smull	r2, r3, r3, r0
 123 0032 0344     		add	r3, r3, r0
 124 0034 DB12     		asrs	r3, r3, #11
ARM GAS  C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s 			page 4


  23:Core/Src/main.c ****         TIM3->CCR2 = (8400 * adcValue) / 4095; 
 125              		.loc 1 23 20 discriminator 1 view .LVU24
 126 0036 034A     		ldr	r2, .L8+8
 127 0038 9363     		str	r3, [r2, #56]
  20:Core/Src/main.c ****     while (1)
 128              		.loc 1 20 11 is_stmt 1 view .LVU25
 129 003a EEE7     		b	.L6
 130              	.L9:
 131              		.align	2
 132              	.L8:
 133 003c 00000000 		.word	adcValue
 134 0040 81000880 		.word	-2146959231
 135 0044 00040040 		.word	1073742848
 136              		.cfi_endproc
 137              	.LFE130:
 139              		.global	calculatePulseARR
 140              		.section	.bss.calculatePulseARR,"aw",%nobits
 141              		.align	2
 144              	calculatePulseARR:
 145 0000 00000000 		.space	4
 146              		.global	FLAG_Revolution
 147              		.section	.bss.FLAG_Revolution,"aw",%nobits
 148              		.align	2
 151              	FLAG_Revolution:
 152 0000 00000000 		.space	4
 153              		.global	BtnNum
 154              		.section	.bss.BtnNum,"aw",%nobits
 157              	BtnNum:
 158 0000 00       		.space	1
 159              		.global	adcValue
 160              		.section	.bss.adcValue,"aw",%nobits
 161              		.align	1
 164              	adcValue:
 165 0000 0000     		.space	2
 166              		.global	MotorTickCount
 167              		.section	.bss.MotorTickCount,"aw",%nobits
 168              		.align	1
 171              	MotorTickCount:
 172 0000 0000     		.space	2
 173              		.global	GlobalTickCount
 174              		.section	.bss.GlobalTickCount,"aw",%nobits
 175              		.align	1
 178              	GlobalTickCount:
 179 0000 0000     		.space	2
 180              		.text
 181              	.Letext0:
 182              		.file 2 "C:/Programm/Embed tools/xpack-arm-none-eabi-gcc-14.2.1-1.1/arm-none-eabi/include/machine/
 183              		.file 3 "C:/Programm/Embed tools/xpack-arm-none-eabi-gcc-14.2.1-1.1/arm-none-eabi/include/sys/_std
 184              		.file 4 "CMSIS/Devices/STM32F4xx/Inc/STM32F407xx/stm32f407xx.h"
 185              		.file 5 "Core/Inc/interrupt.h"
 186              		.file 6 "Core/Inc/init.h"
ARM GAS  C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:21     .text.ADC_Read_Polling:00000000 $t
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:27     .text.ADC_Read_Polling:00000000 ADC_Read_Polling
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:65     .text.ADC_Read_Polling:00000028 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:70     .text.main:00000000 $t
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:76     .text.main:00000000 main
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:133    .text.main:0000003c $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:164    .bss.adcValue:00000000 adcValue
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:144    .bss.calculatePulseARR:00000000 calculatePulseARR
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:141    .bss.calculatePulseARR:00000000 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:151    .bss.FLAG_Revolution:00000000 FLAG_Revolution
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:148    .bss.FLAG_Revolution:00000000 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:157    .bss.BtnNum:00000000 BtnNum
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:158    .bss.BtnNum:00000000 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:161    .bss.adcValue:00000000 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:171    .bss.MotorTickCount:00000000 MotorTickCount
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:168    .bss.MotorTickCount:00000000 $d
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:178    .bss.GlobalTickCount:00000000 GlobalTickCount
C:\Users\Laska\AppData\Local\Temp\cc3OtRZA.s:175    .bss.GlobalTickCount:00000000 $d

UNDEFINED SYMBOLS
RCC_Init
ITR_Init
GPIO_Init
SysTick_Init
TIM_PWM_Init
ADC_Init_Polling
